<!DOCTYPE html>
<html>
<head>
    <title>personalInfo</title>
    <link href="/css/style.css" rel="stylesheet" type="text/css" media="all" />
    <link href="/css/myTable.css" rel="stylesheet" type="text/css" media="all" />
    <link href="/resource/bootstrap-3.3.7-dist/css/bootstrap.css" rel="stylesheet" type="text/css" media="all" />
    <!-- js -->
    <script src="/resource/js/jquery.min.js"></script>
    <!-- //js -->
    <!-- for-mobile-apps -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <!-- //for-mobile-apps -->
    <!-- start-smoth-scrolling -->
    <script type="text/javascript" src="/js/move-top.js"></script>
    <script type="text/javascript" src="/js/easing.js"></script>
    <script type="text/javascript" src="/js/jquery.validate.js"></script>
    <script type="text/javascript" src="/js/jquery.tools.js"></script>
    <script type="text/javascript" src="/js/jquery.lSelect.js"></script>
    <script type="text/javascript">
        jQuery(document).ready(function($) {
            $(".scroll").click(function(event){
                event.preventDefault();
                $('html,body').animate({scrollTop:$(this.hash).offset().top},1000);
            });

            jQuery.validator.addMethod("passwordIsEq", function(value, element) {
                return this.optional(element) || value === $("#password").val();
            }, "两次密码不一致");
            function validateForm(){
                return $("#inputForm").validate({
                    rules: {
                        "age": {
                            required: true,
                            min: 0,
                            max : 200
                        },
                        "password" : {
                            required: true,
                            minlength : 6,
                            maxlength : 20
                        },
                        "t_password" : {
                            passwordIsEq : true
                        },
                        "username": {
                            required: true,
                            minlength : 6,
                            maxlength : 20
                        },
                        "phone": {
                            required: true,
                            pattern:/^(((13[0-9]{1})|(15[0-9]{1})|(17[0-9]{1})|(18[0-9]{1}))+\d{8})$/,
                            minlength: 11,
                            maxlength:11,
                            digits:true,
                            number:true
                        }
                    },
                    messages: {
                        "username" : {
                            required: "不能为空",
                            minlength: "不能低于6位",
                            maxlength:"不能高于20位"
                        },
                        "password" : {
                            required: "不能为空",
                            minlength: "不能低于6位",
                            maxlength:"不能高于20位"
                        },
                        "t_password" : {
                            passwordIsEq : "两次密码不一致"
                        },
                        "age" : {
                            required: "不能为空",
                            min:"不合格",
                            max : "不合法"
                        },
                        "phone" : {
                            required: "不能为空",
                            minlength: "必须11位数字",
                            maxlength:"必须11位数字",
                            digits:"必须是数字"    ,
                            number:"请输入有效数字",
                            pattern : "手机号格式错误"
                        }
                    }
                });
            }
            $(validateForm());
            // 表单验证
            $("#submit").click(function () {
                if(validateForm().form()) {
                    $.ajax({
                        cache : true,
                        type : "POST",
                        url : "/admin/user/add",
                        data : $('#inputForm').serialize(),
                        async : false,
                        success : function(data) {
                            if (data.status == 1) {
                                location.href = "/admin/user/list.html"
                            }
                        }
                    });
                }
            });

            //显示用户信息  id通过html传递

        });
        addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false);
        function hideURLbar(){ window.scrollTo(0,1); }
    </script>
</head>

<body>
<div class="psd">
    <div class="container">
        <div id="header">
        </div>
        <script>
            $("#header").load("/admin/common/header.html");
            setTimeout(function () {
                $("#nav").children().eq(1).addClass("cap");
            },100);
        </script>
        <div class="contact">
            <h3>添加用户</h3>
            <div class="blog" style="height: 650px;">
                <div class="blog-left">
                    <form id="inputForm" method="post">
                        <table class="input tab-content" style="display: table">
                            <tr>
                                <th>
                                    <span class="glyphicon-class">用户名</span>
                                </th>
                                <td>
                                    <input type="text" class="text" id="username" value="" name="username"/>
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    <span class="glyphicon-class">密码</span>
                                </th>
                                <td>
                                    <input type="text" class="text" id="password" value="" name="password"/>
                                </td>
                            </tr>

                            <tr>
                                <th>
                                    <span class="glyphicon-class">再次输入密码</span>
                                </th>
                                <td>
                                    <input type="text" class="text" id="t_password" value="" name="t_password"/>
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    <span class="glyphicon-class">姓名</span>
                                </th>
                                <td>
                                    <input type="text" class="text" id="name" value="" name="name"/>
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    <span class="glyphicon-class">电话</span>
                                </th>
                                <td>
                                    <input type="text" class="text" id="phone" value="" name="phone"/>
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    <span class="glyphicon-class">年龄</span>
                                </th>
                                <td>
                                    <input type="text" class="text" id="age" value="" name="age" />
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    <span class="glyphicon-class">性别</span>
                                </th>
                                <td>
                                    <input id="boy" type="radio" checked="checked" name="1" />男
                                    <input id="girl" type="radio"  name="1"/>女
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    <span class="glyphicon-class">角色</span>
                                </th>
                                <td>
                                    <select name="role">
                                        <option value="admin:admin">超级管理</option>
                                    </select>
                                </td>
                            </tr>
                        </table>
                        <table class="input">
                            <tr>
                                <th>
                                    &nbsp;
                                </th>
                                <td>
                                    <input type="button" class="button" value="提交" id="submit"/>
                                    <input type="button" class="button" value="返回" onclick="history.back(); return false;" />
                                </td>
                            </tr>
                        </table>
                    </form>
                </div>

                <div class="clearfix"> </div>
            </div>
        </div>
        <iframe src="/admin/common/footer.html" width='100%' height='100%' frameborder='0' name="_blank" id="_blank" />
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function() {
        $().UItoTop({ easingType: 'easeOutQuart' });

    });
</script>


</body>

</html>